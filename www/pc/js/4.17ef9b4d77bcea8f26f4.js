webpackJsonp([4],{ELIa:function(t,e){},KYPj:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("woOf"),a=i.n(s),n=i("Dd8w"),r=i.n(n),l=(i("ZMHN"),i("lKwb")),o=i("SJI6"),d={appid:l.a.appid,timeStamp:l.a.timeStamp},c={components:{},data:function(){return{hidden:!1,radio:0,value2:"",orderlist:[],total:0,nums:10,title:[{name:"全部订单",id:"0"},{name:"待审核",id:"1"},{name:"备货中",id:"2"},{name:"配送中",id:"3"},{name:"已收货",id:"4"},{name:"已取消",id:"5"}],titleId:"0",options:[],value:"",select_zid:"",screenWidth:""}},computed:r()({},Object(o.mapState)(["bitmap"])),methods:{determine:function(){var t=this,e=this.$md5(objKeySort(d)+l.a.appsecret),i=a()({sign:e,dateArr:this.value2,type:this.radio},d);this.$axios({url:l.a.root+l.a.orderExport,method:"get",params:i,headers:{"Content-Type":"application/json; application/octet-stream"},responseType:"blob"}).then(function(e){if(e){var i=new Blob([e.data]),s=window.URL.createObjectURL(i),a=document.createElement("a");a.style.display="none",a.href=s,a.setAttribute("download","订单记录.xls"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),t.hidden=!1}}).catch(function(t){console.log(t)})},selectClick:function(t){this.select_zid=t,this.allOrder()},childInfo:function(){var t=this,e=this.$md5("appid="+l.a.appid+"&timeStamp="+l.a.timeStamp+l.a.appsecret);this.$get(l.a.root+l.a.childInfo,{appid:l.a.appid,timeStamp:l.a.timeStamp,sign:e}).then(function(e){200==e.code&&(t.options=e.data)})},order:function(t){var e=this;this.$get(l.a.root+l.a.orderList,t).then(function(t){var i=t.data;e.orderlist=i.list,e.total=i.total,i.list.length?e.$store.commit("bitMap",!0):e.$store.commit("bitMap",!1),e.$Indicator.close()})},allOrder:function(){var t=a()({page:1,type:1},d),e=this.$md5(objKeySort(t)+l.a.appsecret),i=a()({sign:e,num:this.nums,select_zid:this.select_zid,status:this.titleId},t);this.$Indicator.open("加载中..."),this.order(i)},handleCommand:function(t){this.$message("click on item "+t)},operate:function(t,e,i){var s=this,n=a()({id:t},d),r=this.$md5(objKeySort(n)+l.a.appsecret),o=a()({sign:r},n);this.$get(l.a.root+e,o).then(function(t){200!=t.code?s.$Toast({message:t.msg,duration:1e3}):(s.$Toast({message:i,duration:1e3}),s.allOrder())})},cancel:function(t){this.operate(t,l.a.cancelOrder,"取消订单成功")},confirm:function(t){this.operate(t,l.a.receiveOrder,"确认收货成功")},anotherOrder:function(t){this.operate(t,l.a.oneMoreTime,"再来一单成功")},titleClick:function(t){this.titleId=t.id,this.allOrder()},handleCurrentChange:function(t){var e=a()({page:t,type:1},d),i=this.$md5(objKeySort(e)+l.a.appsecret),s=a()({sign:i,num:this.nums,select_zid:this.select_zid,status:this.titleId},e);this.$Indicator.open("加载中..."),this.order(s)}},mounted:function(){this.screenWidth=document.getElementById("width").offsetWidth;var t=this;window.onresize=function(){t.screenWidth=document.getElementById("width").offsetWidth}},created:function(){this.childInfo(),this.allOrder()}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",[s("div",{staticClass:"content_box"},[s("div",{staticClass:"order_box",attrs:{id:"width"}},[s("div",{staticClass:"fixed order_top ",style:{width:t.screenWidth+"px"}},[s("div",{staticClass:"top_left"},t._l(t.title,function(e){return s("div",{staticClass:"top_left_item",class:{on:t.titleId==e.id},on:{click:function(i){return t.titleClick(e)}}},[1==e.id?s("span",[t._v("10")]):t._e(),t._v(" "),2==e.id?s("span",[t._v("99")]):t._e(),t._v(" "),s("div",[t._v(t._s(e.name))])])}),0),t._v(" "),s("div",{staticClass:" top_right"},[s("div",[t._v("选择子账号：")]),t._v(" "),s("div",[s("el-select",{attrs:{placeholder:"选择子账号"},on:{change:t.selectClick},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[s("el-option",{attrs:{label:"当前账号",value:""}}),t._v(" "),t._l(t.options,function(t){return s("el-option",{key:t.nickname,attrs:{label:t.nickname,value:t.zid}})})],2)],1)])]),t._v(" "),t.bitmap?s("div",{staticClass:"order_content"},[t.hidden?s("div",[s("div",{staticClass:"export"}),t._v(" "),s("div",{staticClass:"exportinfo"},[s("div",{staticClass:"h1 "},[s("h1",{staticClass:"el-icon-toilet-paper pointer",on:{click:t.determine}},[t._v("导出订单 ")]),s("i",{staticClass:"el-icon-close pointer",on:{click:function(e){t.hidden=!1}}})]),t._v(" "),s("div",{staticClass:"choose"},[s("div",[s("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[s("el-radio",{attrs:{label:0}},[t._v("仅订单")]),t._v(" "),s("el-radio",{attrs:{label:1}},[t._v("附带商品")])],1)],1),t._v(" "),s("div",[t._v(" 配送时间 : "),s("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1)])])]):t._e(),t._v(" "),s("table",[s("tr",[s("th",{attrs:{align:"left"}},[t._v("商品 ")]),t._v(" "),s("th",{attrs:{align:"left"}},[t._v("数量")]),t._v(" "),s("th",{attrs:{align:"left"}},[t._v("金额")]),t._v(" "),s("th",{attrs:{align:"left"}},[t._v("订单状态")]),t._v(" "),s("th",{attrs:{align:"left"}},[t._v("操作")]),t._v(" "),s("th",{staticClass:"right",attrs:{align:"left"}},[s("i",{staticClass:"fa fa-share-square-o",on:{click:function(e){t.hidden=!0}}},[t._v(" 导出")])])]),t._v(" "),t._l(t.orderlist,function(e){return s("tr",{staticClass:"list_box"},[s("td",{staticClass:"divcss5-td-1"},[s("div",{staticClass:"list_top"},[t._v("下单时间"+t._s(e.created_time))]),t._v(" "),s("div",{staticClass:"list_txt",staticStyle:{display:"flex"}},[s("img",{attrs:{src:"http://test.caidj.cn"+e.item_img}}),t._v(" "),s("div",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.item_title))])])]),t._v(" "),s("td",{staticClass:"divcss5-td-1"},[s("div",{staticClass:"list_top"},[t._v("订单号："+t._s(e.order_sn))]),t._v(" "),s("div",{staticClass:"list_txt"},[t._v("\n                  "+t._s(e.item_count)+"\n                ")])]),t._v(" "),s("td",{staticClass:"divcss5-td-2"},[s("div",{staticClass:"list_txt"},[t._v("\n                  "+t._s(e.xd_price)+"\n                ")])]),t._v(" "),s("td",{staticClass:"divcss5-td-2"},[s("div",{staticClass:"list_txt"},[0==e.order_status?s("span",[t._v("待审核")]):t._e(),t._v(" "),1==e.order_status?s("span",[t._v("备货中")]):t._e(),t._v(" "),2==e.order_status?s("span",[t._v("配送中")]):t._e(),t._v(" "),3==e.order_status?s("span",[t._v("已收货")]):t._e(),t._v(" "),4==e.order_status?s("span",[t._v("已取消")]):t._e()])]),t._v(" "),s("td",{staticClass:"divcss5-td-3"},[4==e.order_status||1==e.order_status?s("div",{staticClass:"list_txt list_btn"},[s("span",{staticClass:"without"},[t._v("\n\t\t\t\t\t\t\t\t\t\t/\n\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),0==e.order_status?s("div",{staticClass:"list_txt list_btn"},[s("span",{staticClass:"cancel",on:{click:function(i){return t.cancel(e.id)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t取消订单\n\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),3==e.order_status?s("div",{staticClass:"list_txt list_btn"},[s("span",{staticClass:"again",on:{click:function(i){return t.anotherOrder(e.id)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t再来一单\n\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),2==e.order_status?s("div",{staticClass:"list_txt list_btn"},[s("span",{staticClass:"affirm",on:{click:function(i){return t.confirm(e.id)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t确认收货\n\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),3==e.order_status?s("div",{staticClass:"list_txt list_btn"},[s("span",{staticClass:"logistics"},[s("router-link",{attrs:{to:{name:"map",query:{id:e.id}}}},[t._v("查看物流")])],1)]):t._e()]),t._v(" "),s("td",[s("div",{staticClass:"list_time"},[t._v("\n                  配送时间："+t._s(e.send_time)+"\n                ")]),t._v(" "),s("div",{staticClass:"list_examine"},[s("router-link",{attrs:{to:{name:"orderDetails",query:{id:e.id}}}},[t._v(" 查看")])],1)])])})],2),t._v(" "),s("div",{staticClass:"paging_box"},[s("div",{staticClass:"block pages"},[s("el-pagination",{attrs:{background:"","current-page":t.currentPage3,"page-size":t.nums,layout:"prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage3=e},"update:current-page":function(e){t.currentPage3=e}}})],1)])]):s("div",{staticClass:"order_placeholder_figure"},[s("img",{attrs:{src:i("QWn6")}})])])])])},staticRenderFns:[]};var v=i("VU/8")(c,_,!1,function(t){i("ELIa")},null,null);e.default=v.exports}});