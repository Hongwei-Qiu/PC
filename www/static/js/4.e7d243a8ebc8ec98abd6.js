webpackJsonp([4],{BXY9:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("lKwb"),s={data:function(){return{imageUrl:"",avatar:"",userinfo:{}}},methods:{upLoad:function(e){var a=this;this.$Indicator.open("上传中...");var t={appid:n.a.appid,timeStamp:n.a.timeStamp,type:"avatars"},s=this.$md5(objKeySort(t)+n.a.appsecret),o=new window.FormData;return o.append("sign",s),o.append("appid",n.a.appid),o.append("timeStamp",n.a.timeStamp),o.append("type","avatars "),o.append("img",e.file),this.$post(n.a.root+n.a.uploadImg,o).then(function(e){a.$Indicator.close(),200==e.code?(a.$message({message:"上传成功",duration:1e3,iconClass:"none",customClass:"modifypwd",center:!0}),a.avatar=e.data.path,a.imageUrl=n.a.root+e.data.path):a.$message({message:e.msg,duration:1e3,iconClass:"none",customClass:"modifypwd",center:!0})}),!1},beforeAvatarUpload:function(e){var a=e.size/1024/1024<2;return a||this.$message.error("上传头像图片大小不能超过 2MB!"),a},userinfoSave:function(){var e=this;this.$Indicator.open("保存中...");var a={appid:n.a.appid,timeStamp:n.a.timeStamp},t=this.$md5(objKeySort(a)+n.a.appsecret),s=new window.FormData;s.append("sign",t),s.append("appid",n.a.appid),s.append("timeStamp",n.a.timeStamp),s.append("avatar",this.avatar),s.append("nickname",this.userinfo.nickname),s.append("phone",this.userinfo.phone),s.append("address",this.userinfo.address),s.append("contact",this.userinfo.contact),this.$post(n.a.root+n.a.saveMemberInfo,s).then(function(a){e.$Indicator.close(),200==a.code?e.$message({message:"保存成功",duration:1e3,iconClass:"none",customClass:"modifypwd",center:!0}):e.$message({message:a.msg,duration:1e3,iconClass:"none",customClass:"modifypwd",center:!0})})},userinfoRequest:function(){var e=this;this.$Indicator.open("加载中...");var a=this.$md5("appid="+n.a.appid+"&timeStamp="+n.a.timeStamp+n.a.appsecret);this.$get(n.a.root+n.a.memberInfo,{appid:n.a.appid,timeStamp:n.a.timeStamp,sign:a}).then(function(a){e.$Indicator.close(),200==a.code&&(e.userinfo=a.data.info,""==e.userinfo.logo?e.imageUrl=n.a.root+a.data.member_default:e.imageUrl=n.a.root+e.userinfo.logo)})}},created:function(){this.userinfoRequest()}},o={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"content_box"},[t("div",{staticClass:"information"},[t("h1",[e._v("信息资料")]),e._v(" "),t("form",[t("div",[t("div",{staticClass:"avator"},[e._v("个人头像 : ")]),e._v(" "),t("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}),e._v(" "),t("div",[t("el-upload",{staticClass:"avatar-demo",attrs:{action:"123","http-request":e.upLoad,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t("mark",[e._v("要求图片不超过2MB")])])],1)],1)]),e._v(" "),t("p",{staticStyle:{clear:"both"}},[e._v("单位名 : "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.nickname,expression:"userinfo.nickname"}],attrs:{type:"text"},domProps:{value:e.userinfo.nickname},on:{input:function(a){a.target.composing||e.$set(e.userinfo,"nickname",a.target.value)}}})]),e._v(" "),t("p",[e._v("联系人 : "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.contact,expression:"userinfo.contact"}],attrs:{type:"text"},domProps:{value:e.userinfo.contact},on:{input:function(a){a.target.composing||e.$set(e.userinfo,"contact",a.target.value)}}})]),e._v(" "),t("p",[e._v("手机号 : "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.phone,expression:"userinfo.phone"}],attrs:{type:"text"},domProps:{value:e.userinfo.phone},on:{input:function(a){a.target.composing||e.$set(e.userinfo,"phone",a.target.value)}}})]),e._v(" "),t("p",[e._v("地　址 : "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.address,expression:"userinfo.address"}],attrs:{type:"text",placeholder:"请上传你的地址"},domProps:{value:e.userinfo.address},on:{input:function(a){a.target.composing||e.$set(e.userinfo,"address",a.target.value)}}})]),e._v(" "),t("p",{staticClass:"pointer save",on:{click:function(a){return e.userinfoSave()}}},[e._v("保存")])])])])},staticRenderFns:[]};var i=t("VU/8")(s,o,!1,function(e){t("nLUV")},"data-v-2920bf7e",null);a.default=i.exports},nLUV:function(e,a){}});